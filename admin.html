<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Protected</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>body{font-family:sans-serif;background:#0f172a;color:#f1f5f9}.glass{background:rgba(30,41,59,0.7);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.05)}.hidden{display:none!important}</style>
</head>
<body class="min-h-screen p-6">
<div id="lo" class="fixed inset-0 bg-slate-900 z-50 flex items-center justify-center"><div class="glass p-8 rounded-2xl w-full max-w-md text-center"><h2 class="text-2xl font-bold mb-6 text-pink-500">üõ°Ô∏è ADMIN ACCESS</h2><input id="ie" type="email" placeholder="Email" class="w-full mb-4 p-3 rounded bg-slate-800 border border-slate-700 text-white"><input id="ip" type="password" placeholder="Pass" class="w-full mb-6 p-3 rounded bg-slate-800 border border-slate-700 text-white"><button id="bl" class="w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 rounded">LOGIN</button><p id="le" class="text-red-500 mt-4 text-sm hidden"></p></div></div>
<div id="db" class="hidden max-w-7xl mx-auto"><header class="flex justify-between items-center mb-10 border-b border-gray-800 pb-6"><h1 class="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500">ORDER MANAGER</h1><div class="flex items-center gap-4"><span id="an" class="text-gray-400 font-semibold">...</span><button id="bo" class="text-sm bg-slate-800 px-4 py-2 rounded text-white">Logout</button></div></header><div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><div class="glass rounded-2xl p-6 h-fit"><h2 class="text-xl font-bold text-yellow-400 mb-6">‚è≥ PENDING</h2><div id="pl" class="space-y-4"></div></div><div class="glass rounded-2xl p-6 opacity-80"><h2 class="text-xl font-bold text-green-400 mb-6">‚úÖ APPROVED</h2><div id="al" class="space-y-4"></div></div></div></div>
<script type="module">
import{initializeApp as _i}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";import{getAuth as _a,signInWithEmailAndPassword as _s,signOut as _o,onAuthStateChanged as _c}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";import{getFirestore as _f,collection as _cl,query as _q,orderBy as _ob,onSnapshot as _os,doc as _d,runTransaction as _rt,serverTimestamp as _st,setDoc as _sd,increment as _ic}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
const _0x={apiKey:"AIzaSyBs-L2sgqSQMviXU3-GODND8Wt4uaj7u7U",authDomain:"bcr-tool.firebaseapp.com",projectId:"bcr-tool",storageBucket:"bcr-tool.firebasestorage.app",messagingSenderId:"937779161122",appId:"1:937779161122:web:3bd66c1a0a6fee421e827b"};
const _z=atob("aHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTQ0ODM3OTE4OTM5NTcyMjQzNC8zNjY2VXlHRnFqY3BtbEJsRTRnX2dzOWlzWjMxZ19uc19WcENMT3ZEUzJIM3dkV2ZwYVZSaU1NZ0I5c2JWUTVfMUVVUA==");
const app=_i(_0x),auth=_a(app),db=_f(app);
const el=(id)=>document.getElementById(id);
el('bl').onclick=async()=>{try{await _s(auth,el('ie').value,el('ip').value)}catch(e){el('le').innerText="L·ªói ƒëƒÉng nh·∫≠p";el('le').classList.remove('hidden')}};
el('bo').onclick=()=>_o(auth);
_c(auth,(u)=>{if(u){el('lo').classList.add('hidden');el('db').classList.remove('hidden');el('an').innerText=u.email;_L()}else{el('lo').classList.remove('hidden');el('db').classList.add('hidden')}});
function _L(){_os(_q(_cl(db,"transactions"),_ob("createdAt","desc")),(s)=>{el('pl').innerHTML='';el('al').innerHTML='';s.forEach(d=>{const o=d.data(),c=_C(o);(o.status==='pending'?el('pl'):el('al')).appendChild(c)})})}
function _C(o){const d=document.createElement('div');d.className=`p-4 rounded-xl border ${o.status==='pending'?'bg-slate-800 border-yellow-500/30':'bg-slate-900 border-white/5 opacity-70'}`;d.innerHTML=`<div class="flex justify-between mb-2"><div><div class="text-xs text-gray-400 font-bold">${o.packageName}</div><div class="text-xl font-bold text-white">+${o.tokens}</div><div class="text-xs text-pink-400 font-mono">${o.orderId}</div></div><div class="text-right"><div class="text-lg font-bold text-green-400">${new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'}).format(o.price)}</div></div></div><div class="text-sm text-gray-400 mb-3">${o.email}</div>${o.status==='pending'?`<div class="grid grid-cols-2 gap-2"><button onclick="window._A('${o.orderId}','${o.uid}',${o.tokens},'${o.email}')" class="bg-green-600 text-white font-bold py-2 rounded">DUY·ªÜT</button><button onclick="window._R('${o.orderId}')" class="bg-red-900/50 text-red-200 font-bold py-2 rounded">H·ª¶Y</button></div>`:`<div class="text-xs font-bold text-green-500 bg-green-500/10 py-1 rounded text-center">ƒê√É DUY·ªÜT</div>`}`;return d}
window._A=async(oid,uid,t,em)=>{if(!confirm('Duy·ªát?'))return;try{await _rt(db,async(tr)=>{tr.update(_d(db,"transactions",oid),{status:'approved',approvedAt:_st()});tr.update(_d(db,"users",uid),{tokens:_ic(t)});tr.set(_d(_cl(db,"users",uid,"history")),{packageName:'MoMo Deposit',tokens:t,method:'MoMo',createdAt:_st(),status:'Success'})});fetch(_z,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:"Admin Bot",embeds:[{title:"‚úÖ APPROVED",color:5763719,fields:[{name:"User",value:em,inline:true},{name:"Token",value:`+${t}`,inline:true}]}]})});alert('Done!')}catch(e){alert(e.message)}};
window._R=async(oid)=>{if(confirm('H·ªßy?'))await _sd(_d(db,"transactions",oid),{status:'rejected'},{merge:true})};
</script>
</body>
</html>
