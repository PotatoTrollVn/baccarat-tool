<script language=JavaScript> html='%3C%21DOCTYPE%20html%3E%0D%0A%3Chtml%20lang%3D%22vi%22%3E%0D%0A%3Chead%3E%0D%0A%20%20%20%20%3Cmeta%20charset%3D%22UTF-8%22%3E%0D%0A%20%20%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1.0%22%3E%0D%0A%20%20%20%20%3Ctitle%3EAdmin%20Panel%20-%20BCR%20Tool%3C%2Ftitle%3E%0D%0A%20%20%20%20%3Cscript%20src%3D%22https%3A%2F%2Fcdn.tailwindcss.com%22%3E%3C%2Fscript%3E%0D%0A%20%20%20%20%3Cstyle%3E%0D%0A%20%20%20%20%20%20%20%20%40import%20url%28%27https%3A%2F%2Ffonts.googleapis.com%2Fcss2%3Ffamily%3DInter%3Awght%40400%3B600%3B700%3B900%26display%3Dswap%27%29%3B%0D%0A%20%20%20%20%20%20%20%20body%20%7B%20font-family%3A%20%27Inter%27%2C%20sans-serif%3B%20background%3A%20%230f172a%3B%20color%3A%20%23f1f5f9%3B%20%7D%0D%0A%20%20%20%20%20%20%20%20.glass%20%7B%20background%3A%20rgba%2830%2C%2041%2C%2059%2C%200.7%29%3B%20backdrop-filter%3A%20blur%2810px%29%3B%20border%3A%201px%20solid%20rgba%28255%2C255%2C255%2C0.05%29%3B%20%7D%0D%0A%20%20%20%20%20%20%20%20.hidden%20%7B%20display%3A%20none%20%21important%3B%20%7D%0D%0A%20%20%20%20%3C%2Fstyle%3E%0D%0A%3C%2Fhead%3E%0D%0A%3Cbody%20class%3D%22min-h-screen%20p-6%22%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id%3D%22login-overlay%22%20class%3D%22fixed%20inset-0%20bg-slate-900%20z-50%20flex%20items-center%20justify-center%22%3E%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22glass%20p-8%20rounded-2xl%20w-full%20max-w-md%20text-center%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ch2%20class%3D%22text-2xl%20font-bold%20mb-6%20text-pink-500%22%3E%F0%9F%9B%A1%EF%B8%8F%20ADMIN%20ACCESS%3C%2Fh2%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22admin-email%22%20type%3D%22email%22%20placeholder%3D%22Email%20Admin%22%20class%3D%22w-full%20mb-4%20p-3%20rounded%20bg-slate-800%20border%20border-slate-700%20text-white%20outline-none%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22admin-password%22%20type%3D%22password%22%20placeholder%3D%22M%E1%BA%ADt%20kh%E1%BA%A9u%22%20class%3D%22w-full%20mb-6%20p-3%20rounded%20bg-slate-800%20border%20border-slate-700%20text-white%20outline-none%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22btn-login%22%20class%3D%22w-full%20bg-pink-600%20hover%3Abg-pink-700%20text-white%20font-bold%20py-3%20rounded%22%3E%C4%90%C4%82NG%20NH%E1%BA%ACP%3C%2Fbutton%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20id%3D%22login-error%22%20class%3D%22text-red-500%20mt-4%20text-sm%20hidden%22%3E%3C%2Fp%3E%0D%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0D%0A%20%20%20%20%3C%2Fdiv%3E%0D%0A%0D%0A%20%20%20%20%3Cdiv%20id%3D%22dashboard%22%20class%3D%22hidden%20max-w-7xl%20mx-auto%22%3E%0D%0A%20%20%20%20%20%20%20%20%3Cheader%20class%3D%22flex%20justify-between%20items-center%20mb-10%20border-b%20border-gray-800%20pb-6%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ch1%20class%3D%22text-3xl%20font-black%20text-transparent%20bg-clip-text%20bg-gradient-to-r%20from-pink-500%20to-purple-500%22%3EQU%E1%BA%A2N%20L%C3%9D%20%C4%90%C6%A0N%20H%C3%80NG%3C%2Fh1%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22flex%20items-center%20gap-4%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20id%3D%22admin-name%22%20class%3D%22text-gray-400%20font-semibold%22%3EAdmin%3C%2Fspan%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22btn-logout%22%20class%3D%22text-sm%20bg-slate-800%20px-4%20py-2%20rounded%20text-white%22%3E%C4%90%C4%83ng%20xu%E1%BA%A5t%3C%2Fbutton%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%3C%2Fheader%3E%0D%0A%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22grid%20grid-cols-1%20lg%3Agrid-cols-2%20gap-8%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22glass%20rounded-2xl%20p-6%20h-fit%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch2%20class%3D%22text-xl%20font-bold%20text-yellow-400%20mb-6%22%3E%E2%8F%B3%20%C4%90ang%20Ch%E1%BB%9D%20Duy%E1%BB%87t%3C%2Fh2%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22pending-list%22%20class%3D%22space-y-4%22%3E%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22glass%20rounded-2xl%20p-6%20opacity-80%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch2%20class%3D%22text-xl%20font-bold%20text-green-400%20mb-6%22%3E%E2%9C%85%20%C4%90%C3%A3%20Duy%E1%BB%87t%20G%E1%BA%A7n%20%C4%90%C3%A2y%3C%2Fh2%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22approved-list%22%20class%3D%22space-y-4%22%3E%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0D%0A%20%20%20%20%3C%2Fdiv%3E%0D%0A%0D%0A%20%20%20%20%3Cscript%20type%3D%22module%22%3E%0D%0A%20%20%20%20%20%20%20%20import%20%7B%20initializeApp%20%7D%20from%20%22https%3A%2F%2Fwww.gstatic.com%2Ffirebasejs%2F10.8.0%2Ffirebase-app.js%22%3B%0D%0A%20%20%20%20%20%20%20%20import%20%7B%20getAuth%2C%20signInWithEmailAndPassword%2C%20signOut%2C%20onAuthStateChanged%20%7D%20from%20%22https%3A%2F%2Fwww.gstatic.com%2Ffirebasejs%2F10.8.0%2Ffirebase-auth.js%22%3B%0D%0A%20%20%20%20%20%20%20%20import%20%7B%20getFirestore%2C%20collection%2C%20query%2C%20orderBy%2C%20onSnapshot%2C%20doc%2C%20runTransaction%2C%20serverTimestamp%2C%20setDoc%2C%20increment%2C%20getDoc%20%7D%20from%20%22https%3A%2F%2Fwww.gstatic.com%2Ffirebasejs%2F10.8.0%2Ffirebase-firestore.js%22%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Webhook%20b%C3%A1o%20c%C3%A1o%20Admin%0D%0A%20%20%20%20%20%20%20%20const%20DISCORD_WEBHOOK_APPROVED%20%3D%20%22https%3A%2F%2Fdiscord.com%2Fapi%2Fwebhooks%2F1448379189395722434%2F3666UyGFqjcpmlBlE4g_gs9isZ31g_ns_VpCLOvDS2H3wdWFpaVRiMMgB9sbVQ5_1EUP%22%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20firebaseConfig%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20apiKey%3A%20%22AIzaSyBs-L2sgqSQMviXU3-GODND8Wt4uaj7u7U%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20authDomain%3A%20%22bcr-tool.firebaseapp.com%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20projectId%3A%20%22bcr-tool%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20storageBucket%3A%20%22bcr-tool.firebasestorage.app%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20messagingSenderId%3A%20%22937779161122%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20appId%3A%20%221%3A937779161122%3Aweb%3A3bd66c1a0a6fee421e827b%22%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20app%20%3D%20initializeApp%28firebaseConfig%29%3B%0D%0A%20%20%20%20%20%20%20%20const%20auth%20%3D%20getAuth%28app%29%3B%0D%0A%20%20%20%20%20%20%20%20const%20db%20%3D%20getFirestore%28app%29%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Login%20Logic%0D%0A%20%20%20%20%20%20%20%20const%20loginOverlay%20%3D%20document.getElementById%28%27login-overlay%27%29%3B%0D%0A%20%20%20%20%20%20%20%20const%20dashboard%20%3D%20document.getElementById%28%27dashboard%27%29%3B%0D%0A%20%20%20%20%20%20%20%20const%20btnLogin%20%3D%20document.getElementById%28%27btn-login%27%29%3B%0D%0A%20%20%20%20%20%20%20%20const%20errorMsg%20%3D%20document.getElementById%28%27login-error%27%29%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20btnLogin.onclick%20%3D%20async%20%28%29%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20await%20signInWithEmailAndPassword%28auth%2C%20document.getElementById%28%27admin-email%27%29.value%2C%20document.getElementById%28%27admin-password%27%29.value%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28e%29%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errorMsg.textContent%20%3D%20%22Sai%20th%C3%B4ng%20tin%21%22%3B%20errorMsg.classList.remove%28%27hidden%27%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20document.getElementById%28%27btn-logout%27%29.onclick%20%3D%20%28%29%20%3D%3E%20signOut%28auth%29%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20onAuthStateChanged%28auth%2C%20%28user%29%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28user%29%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20Role%20%28Optional%3A%20remove%20check%20if%20you%20are%20the%20only%20user%20accessing%20this%20file%20locally%29%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20For%20safety%3A%20checkAdminRole%28user%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20loginOverlay.classList.add%28%27hidden%27%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dashboard.classList.remove%28%27hidden%27%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.getElementById%28%27admin-name%27%29.textContent%20%3D%20user.email%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20startListening%28%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20loginOverlay.classList.remove%28%27hidden%27%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dashboard.classList.add%28%27hidden%27%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Listen%20for%20orders%0D%0A%20%20%20%20%20%20%20%20function%20startListening%28%29%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20q%20%3D%20query%28collection%28db%2C%20%22transactions%22%29%2C%20orderBy%28%22createdAt%22%2C%20%22desc%22%29%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20onSnapshot%28q%2C%20%28snapshot%29%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20pendingDiv%20%3D%20document.getElementById%28%27pending-list%27%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20approvedDiv%20%3D%20document.getElementById%28%27approved-list%27%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pendingDiv.innerHTML%20%3D%20%27%27%3B%20approvedDiv.innerHTML%20%3D%20%27%27%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28snapshot.empty%29%20pendingDiv.innerHTML%20%3D%20%27%3Cp%20class%3D%22text-center%20text-gray-500%22%3ETr%E1%BB%91ng.%3C%2Fp%3E%27%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20snapshot.forEach%28%28docSnap%29%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20order%20%3D%20docSnap.data%28%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20card%20%3D%20createCard%28order%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28order.status%20%3D%3D%3D%20%27pending%27%29%20pendingDiv.appendChild%28card%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28order.status%20%3D%3D%3D%20%27approved%27%29%20approvedDiv.appendChild%28card%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20function%20createCard%28order%29%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20div%20%3D%20document.createElement%28%27div%27%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20div.className%20%3D%20%60p-4%20rounded-xl%20border%20%24%7Border.status%20%3D%3D%3D%20%27pending%27%20%3F%20%27bg-slate-800%20border-yellow-500%2F30%27%20%3A%20%27bg-slate-900%20border-white%2F5%20opacity-70%27%7D%60%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20time%20%3D%20order.createdAt%20%3F%20new%20Date%28order.createdAt.seconds%20%2A%201000%29.toLocaleString%28%27vi-VN%27%29%20%3A%20%27...%27%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20price%20%3D%20new%20Intl.NumberFormat%28%27vi-VN%27%2C%20%7Bstyle%3A%27currency%27%2C%20currency%3A%27VND%27%7D%29.format%28order.price%29%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20div.innerHTML%20%3D%20%60%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22flex%20justify-between%20items-start%20mb-2%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22text-xs%20text-gray-400%20uppercase%20font-bold%22%3E%24%7Border.packageName%7D%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22text-xl%20font-bold%20text-white%22%3E%2B%24%7Border.tokens%7D%20Tokens%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22text-xs%20text-pink-400%20font-mono%20mt-1%22%3E%24%7Border.orderId%7D%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22text-right%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22text-lg%20font-bold%20text-green-400%22%3E%24%7Bprice%7D%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22text-xs%20text-gray-500%20mt-1%22%3E%24%7Btime%7D%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22text-sm%20text-gray-400%20mb-3%22%3E%24%7Border.email%7D%3C%2Fdiv%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24%7Border.status%20%3D%3D%3D%20%27pending%27%20%3F%20%60%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22grid%20grid-cols-2%20gap-2%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20onclick%3D%22window.approve%28%27%24%7Border.orderId%7D%27%2C%20%27%24%7Border.uid%7D%27%2C%20%24%7Border.tokens%7D%2C%20%27%24%7Border.email%7D%27%2C%20%27%24%7Border.packageName%7D%27%29%22%20class%3D%22bg-green-600%20text-white%20font-bold%20py-2%20rounded%22%3E%E2%9C%85%20DUY%E1%BB%86T%3C%2Fbutton%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20onclick%3D%22window.reject%28%27%24%7Border.orderId%7D%27%29%22%20class%3D%22bg-red-900%2F50%20text-red-200%20font-bold%20py-2%20rounded%22%3EH%E1%BB%A6Y%3C%2Fbutton%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%60%20%3A%20%60%3Cdiv%20class%3D%22text-center%20text-xs%20font-bold%20text-green-500%20bg-green-500%2F10%20py-1%20rounded%22%3E%C4%90%C3%83%20DUY%E1%BB%86T%3C%2Fdiv%3E%60%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%60%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20div%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Global%20functions%0D%0A%20%20%20%20%20%20%20%20window.approve%20%3D%20async%20%28orderId%2C%20userId%2C%20tokens%2C%20email%2C%20pkgName%29%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28%21confirm%28%60Duy%E1%BB%87t%20%C4%91%C6%A1n%20%24%7BorderId%7D%3F%60%29%29%20return%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20await%20runTransaction%28db%2C%20async%20%28transaction%29%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20orderRef%20%3D%20doc%28db%2C%20%22transactions%22%2C%20orderId%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20userRef%20%3D%20doc%28db%2C%20%22users%22%2C%20userId%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20historyRef%20%3D%20doc%28collection%28db%2C%20%22users%22%2C%20userId%2C%20%22history%22%29%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transaction.update%28orderRef%2C%20%7B%20status%3A%20%27approved%27%2C%20approvedAt%3A%20serverTimestamp%28%29%20%7D%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transaction.update%28userRef%2C%20%7B%20tokens%3A%20increment%28tokens%29%20%7D%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transaction.set%28historyRef%2C%20%7B%20packageName%3A%20%27MoMo%20Deposit%27%2C%20tokens%3A%20tokens%2C%20method%3A%20%27MoMo%27%2C%20createdAt%3A%20serverTimestamp%28%29%2C%20status%3A%20%27Success%27%20%7D%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20G%E1%BB%ADi%20Webhook%20b%C3%A1o%20c%C3%A1o%20Admin%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20payload%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20username%3A%20%22Admin%20Log%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20embeds%3A%20%5B%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20title%3A%20%22%E2%9C%85%20%C4%90%C3%83%20DUY%E1%BB%86T%20TH%C3%80NH%20C%C3%94NG%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20color%3A%205763719%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fields%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20name%3A%20%22User%22%2C%20value%3A%20email%2C%20inline%3A%20true%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20name%3A%20%22Token%22%2C%20value%3A%20%60%2B%24%7Btokens%7D%60%2C%20inline%3A%20true%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20name%3A%20%22M%C3%A3%20GD%22%2C%20value%3A%20orderId%2C%20inline%3A%20true%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fetch%28DISCORD_WEBHOOK_APPROVED%2C%20%7B%20method%3A%20%27POST%27%2C%20headers%3A%20%7B%20%27Content-Type%27%3A%20%27application%2Fjson%27%20%7D%2C%20body%3A%20JSON.stringify%28payload%29%20%7D%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20alert%28%22Th%C3%A0nh%20c%C3%B4ng%21%22%29%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28e%29%20%7B%20alert%28%22L%E1%BB%97i%3A%20%22%20%2B%20e.message%29%3B%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20window.reject%20%3D%20async%20%28orderId%29%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28%21confirm%28%22H%E1%BB%A7y%20%C4%91%C6%A1n%20n%C3%A0y%3F%22%29%29%20return%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20await%20setDoc%28doc%28db%2C%20%22transactions%22%2C%20orderId%29%2C%20%7B%20status%3A%20%27rejected%27%20%7D%2C%20%7B%20merge%3A%20true%20%7D%29%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%3C%2Fscript%3E%0D%0A%3C%2Fbody%3E%0D%0A%3C%2Fhtml%3E';d=unescape(html);document.write(d);</script>
